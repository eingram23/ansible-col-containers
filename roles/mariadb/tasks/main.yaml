---
- name: Pull and start mariadb container
  containers.podman.podman_container:
    name: "{{ dbsrv_name }}"
    image: docker.io/mariadb:10.9.2
    env:
      MYSQL_ROOT_PASSWORD: "{{ db_root_pw }}"
      MYSQL_DATABASE: "{{ db_name }}"
      MYSQL_USER: "{{ db_user }}"
      MYSQL_PASSWORD: "{{ db_user_pw }}"
      MYSQL_TCP_PORT: "{{ mysql_port }}"
      MYSQL_UNIX_PORT: "{{ mysql_port }}"
    publish:
      - "{{ mysql_port }}:{{ mysql_port }}"
    volume:
      - "{{ dbsrv_name }}-data:/var/lib/mysql"
    state: started
    restart_policy: always